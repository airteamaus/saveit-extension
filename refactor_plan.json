{
  "project": "Brave-style New Tab with Unsplash Background",
  "created": "2025-11-25",
  "status": "in_progress",
  "current_phase": "phase-3",
  "current_task": "task-3-1",

  "summary": "Enhance minimal new tab with Unsplash background image, favorites shortcuts (6 recent saves), and stats counter. Follows Brave new tab design pattern.",

  "design_decisions": {
    "background": "Unsplash random photo, cached 24h, with photographer credit",
    "favorites": "6 most recent saves, opens URL directly (no pinning feature)",
    "stats": "Simple '42 things saved' when signed in",
    "theme": "System only - background image works with both light/dark"
  },

  "phases": [
    {
      "id": "phase-1",
      "name": "Add Unsplash Background",
      "status": "completed",
      "tasks": [
        {
          "id": "task-1-1",
          "type": "implement",
          "description": "Add unsplashAccessKey to src/config.js",
          "status": "completed",
          "files_modified": ["src/config.js"],
          "completion_criteria": ["Config exports unsplashAccessKey"]
        },
        {
          "id": "task-1-2",
          "type": "implement",
          "description": "Add background container and photo credit to newtab-minimal.html",
          "status": "completed",
          "files_modified": ["src/newtab-minimal.html"],
          "completion_criteria": ["Background div exists", "Photo credit footer element exists"]
        },
        {
          "id": "task-1-3",
          "type": "implement",
          "description": "Add CSS for full-viewport background image and photo credit styling",
          "status": "completed",
          "files_modified": ["src/newtab-minimal.css"],
          "completion_criteria": ["Background covers viewport", "Content readable over image", "Credit styled in footer"]
        },
        {
          "id": "task-1-4",
          "type": "implement",
          "description": "Add Unsplash fetch and 24h caching logic to newtab-minimal.js",
          "status": "completed",
          "files_modified": ["src/newtab-minimal.js"],
          "completion_criteria": ["Fetches random landscape photo", "Caches in browser storage for 24h", "Updates photo credit with photographer name/link"]
        }
      ]
    },
    {
      "id": "phase-2",
      "name": "Add Favorites Row",
      "status": "completed",
      "tasks": [
        {
          "id": "task-2-1",
          "type": "implement",
          "description": "Add favorites row HTML structure to newtab-minimal.html",
          "status": "completed",
          "files_modified": ["src/newtab-minimal.html"],
          "completion_criteria": ["Favorites container exists above logo"]
        },
        {
          "id": "task-2-2",
          "type": "implement",
          "description": "Add CSS for favorites grid (6 items, favicon + title)",
          "status": "completed",
          "files_modified": ["src/newtab-minimal.css"],
          "completion_criteria": ["Grid layout for 6 items", "Favicon styling", "Truncated title", "Hover states"]
        },
        {
          "id": "task-2-3",
          "type": "implement",
          "description": "Add JS to fetch 6 recent saves and populate favorites row",
          "status": "completed",
          "files_modified": ["src/newtab-minimal.js"],
          "completion_criteria": ["Calls API.getSavedPages({ limit: 6 })", "Renders favicon + title for each", "Links open saved URL directly", "Graceful handling when < 6 saves"]
        }
      ]
    },
    {
      "id": "phase-3",
      "name": "Add Stats Counter",
      "status": "pending",
      "tasks": [
        {
          "id": "task-3-1",
          "type": "implement",
          "description": "Add stats element to newtab-minimal.html",
          "status": "pending",
          "files_modified": ["src/newtab-minimal.html"],
          "completion_criteria": ["Stats span exists in minimal-links section"]
        },
        {
          "id": "task-3-2",
          "type": "implement",
          "description": "Add CSS for stats display",
          "status": "pending",
          "files_modified": ["src/newtab-minimal.css"],
          "completion_criteria": ["Stats styled consistently with other links"]
        },
        {
          "id": "task-3-3",
          "type": "implement",
          "description": "Add JS to display total count from pagination.total",
          "status": "pending",
          "files_modified": ["src/newtab-minimal.js"],
          "completion_criteria": ["Shows 'N things saved' when signed in", "Hidden when not signed in", "Uses same API call as favorites (no extra fetch)"]
        }
      ]
    },
    {
      "id": "phase-4",
      "name": "Testing and Polish",
      "status": "pending",
      "tasks": [
        {
          "id": "task-4-1",
          "type": "implement",
          "description": "Test in extension mode with real data",
          "status": "pending",
          "completion_criteria": ["Background loads and caches", "Favorites show real saves", "Stats show correct count", "Photo credit links work"]
        },
        {
          "id": "task-4-2",
          "type": "implement",
          "description": "Test standalone mode graceful degradation",
          "status": "pending",
          "completion_criteria": ["Works without API key (no background)", "Works without auth (no favorites/stats)", "No console errors"]
        },
        {
          "id": "task-4-3",
          "type": "implement",
          "description": "Run existing tests and lint",
          "status": "pending",
          "completion_criteria": ["just check passes", "No regressions"]
        }
      ]
    }
  ],

  "files_overview": {
    "modified_files": [
      "src/config.js",
      "src/newtab-minimal.html",
      "src/newtab-minimal.css",
      "src/newtab-minimal.js"
    ],
    "new_files": []
  },

  "api_details": {
    "unsplash_endpoint": "https://api.unsplash.com/photos/random?orientation=landscape&topics=nature",
    "cache_key": "newtab_background",
    "cache_duration_hours": 24,
    "cache_structure": {
      "imageUrl": "string - full size image URL",
      "photographerName": "string - for credit",
      "photographerUrl": "string - link to photographer profile",
      "unsplashPageUrl": "string - link to photo on Unsplash",
      "cachedAt": "number - timestamp"
    }
  }
}
